# 数据库面试知识点

1. 什么是存储过程？有哪些优缺点
   存储过程是一些预编译的SQL语句，存储过程可以说是一个记录集，它是由一些 T-SQL 语句组成的代码块，这些 T-SQL 语句代码像一个方法一样实现一些功能（对单表或多表的增删改查），然后再给这个代码块取一个名字，在用到这个功能的时候调用他就行了。
   - 存储过程是一个预编译的代码块，执行效率比较高
   - 一个存储过程替代大量 T_SQL 语句 ，可以降低网络通信量，提高通信速率
   - 可以一定程度上确保数据安全
2. 索引是什么？有什么作用以及优缺点
   索引是数据库一个或者多个列的值进行排序的结构，是帮助MySql高效获取数据的数据结构。索引就是加快检索表中数据的方法。数据库的索引类似于书籍的索引。在书籍中，索引允许用户不必翻阅完整个书就能迅速地找到所需要的信息。在数据库中，索引也允许数据库程序迅速地找到表中的数据，而不必扫描整个数据库。
   MySQL数据库几个基本的索引类型：普通索引、唯一索引、主键索引、全文索引
   - 索引加快数据库的检索速度
   - 索引降低了插入、删除、修改等维护任务的速度
   - 唯一索引可以确保每一行数据的唯一性
   - 通过使用索引，可以在查询的过程中使用优化隐藏器，提高系统的性能
   - 索引需要占物理和数据空间
3. 什么是事务
   事务是并发控制的基本单位所谓的事务，它是一个操作序列，这些操作要么都执行，要么都不执行，它是一个不可分割的工作单位。事务是数据库维护数据一致性的单位，在每个事务结束时，都能保持数据一致性。
4. 数据库的悲观锁以及乐观锁
   数据库管理系统中的并发控制的任务是确保在多个事务同时存取数据库中同一个数据不破坏事务的隔离性和统一性以及数据库的统一性乐观并发控制 (乐观锁) 和悲观并发控制（悲观锁）是并发控制主要采用的技术手段。
   - 悲观锁：假定会发生并发冲突，屏蔽一切可能违反数据完整性的操作
   - 乐观锁：假设不会发生并发冲突，只在提交操作时检查是否违反数据完整性
5. 使用索引查询一定能提高查询的性能吗
   通常, 通过索引查询数据比全表扫描要快，索引需要空间来存储, 也需要定期维护,每当有记录在表中增减或者索引被修改的时候，索引本身也会被修改，这意味着每条记录的 INSERT,DELETE,UPDATE 将为此多付出 4,5 次的磁盘 I/O. 因为索引需要额外的存储空间和处理，那些不必要的索引反而会使查询时间变慢，使用查询不一定能提高查询性能, 索引范围查询 (INDEX RANGE SCAN) 适用于两种情况:
   - 基于一个范围的检索，一般查询返回结果小于表中记录的的30%
   - 基于非唯一索引的检索
6. drop、delete、truncate的区别
   sql中的drop、delete、truncate都表示删除，但是三者有一些差别
   - delete和truncate只删除表的数据不删除表的结构
   - 速度, 一般来说: drop> truncate >delete
   - **delete**语句是 dml, 这个操作会放到**rollback segement**中, 事务提交之后才生效;
     如果有相应的**trigger**, 执行的时候将被触发. **truncate,drop**是 ddl, 操作立即生效, 原数据不放到 r**ollback segment**中, 不能回滚. 操作不触发**trigger**.
7. drop、delete、truncate分别在什么场景下使用
   - 不再需要一张表的时候
   - 删除部分数据行的时候，delete，并且带上where子句
   - 保留表而删除所有数据用truncate
8. 超键、候选键、主键、外键分别是什么
   - 超键：在关系中能唯一标识的属性集称为关系模式的超键，多个属性组合在一起也可以作为一个超键，超键包含候选键和主键
   - 候选键：是最小超键，即没有冗余元素的超键，理解是删除了某一个属性
   - 主键：数据库表中对储存数据对象予以唯一和完整标识的数据列或属性的组合。一个数据列只能有一个主键，且主键的取值不能缺失，即不能为空值（Null）。
   - 外键：在一个表中存在的另一个表的主键称此表的外键。
9. 什么是视图？以及视图使用的场景
10. 三个范式
11. 范式
12. 数据库失事务隔离级别
13. 数据库连接池的原理
14. 乐观锁和悲观锁
15. 如何实现不同的数据库查询分页
16. SQL注入的原理，如何预防
17. 数据库索引的实现（B+树介绍、和B树、R树区别）
18. SQL性能优化
19. 数据库索引的优缺点以及什么时候数据库索引失效
20. Redis的存储结构